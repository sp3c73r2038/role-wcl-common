---
#
# Script handling package installation for RedHat / CentOS.
#

- name: Update system
  yum:
    update_cache=yes
    name=*
    state=latest

- name: Enable EPEL repository
  yum:
    name=epel-release
    state=present

- name: Enable remi-php56 repository
  yum:
    name=http://rpms.remirepo.net/enterprise/remi-release-7.rpm
    state=present
  when: enable_remi_php56

- name: Edit /etc/yum.repos.d/remi.repo
  ini_file:
    dest=/etc/yum.repos.d/remi.repo
    section=remi-php56
    option=enabled
    value=1
  when: enable_remi_php56

- name: Add required binaries
  yum:
    name={{ item }}
    state=present
  with_items:
    "{{ common_packages_redhat }}"
